<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
  <link rel="stylesheet" type="text/css" href="css/styles.css" media="all">
  <title>Tourism in Australia</title>
</head>
<body>
  <div class="page-container">
    <h2 style="text-align:center; margin: 20px;">Tourism in Australia</h2>

    <div class="toolbar">
      <span id="region-select"></span> 
    </div>

    <div id="vis-map" class="vis-block"></div>
    <div id="vis-arrivals" class="vis-block"></div>
    <div id="vis-purpose" class="vis-block"></div>
  </div>

  <script type="text/javascript">
    let mapView, barView;

    vegaEmbed('#vis-map', 'js/map_vis.json').then(({view}) => {
      mapView = view;

      mapView.addSignalListener('Region_selection', (_, value) => {
        if (barView) {
          barView.signal('Region_selection', value).run();
        }
      });
    }).catch(console.error);

    vegaEmbed('#vis-arrivals', 'js/arrivals_departures.json')
      .catch(console.error);

    vegaEmbed('#vis-purpose', 'js/trips_by_purpose.json').then(({view}) => {
      barView = view;
    }).catch(console.error);
  </script>
</body>
</html>
